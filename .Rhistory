data_crop_raw <- data_crop_raw %>%
mutate_at(3:4, round) %>%
rename_with(~ gsub("crop_", "", .x,fixed = TRUE)) %>%
as.data.frame()
# data_crop_raw$x_coord <- round(data_crop_raw$x_coord)
# data_crop_raw$y_coord <- round(data_crop_raw$y_coord)
# names(data_crop_raw) <- gsub(x = names(data_crop_raw), pattern = "crop_", replacement = "")
data_crop <- inner_join(data_ref, data_crop_raw, by = c("x_coord", "y_coord")) %>%
select(-c("state")) %>%
filter(OBJECTID > 0) %>%
distinct(OBJECTID, .keep_all = TRUE) %>%
arrange(OBJECTID) %>%
as.data.table() %>%
gather(variable, value, -c("FID", "State", "OBJECTID", "cell_id", "x_coord", "y_coord")) %>%
rename("Year" = variable, "crtype" = value)
end_time <- Sys.time()
print("finished processing")
print(end_time-start_time)
rm(data_crop_raw)
gc()
gc()
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
gc()
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
data_crop_raw <- fread("./data/crop.csv", sep=",", header = TRUE) %>%
mutate_at(3:4, round) %>%
rename_with(~ gsub("crop_", "", .x,fixed = TRUE)) %>%
#filter(OBJECTID > 0) %>%
#distinct(OBJECTID, .keep_all = TRUE) %>%
as.data.table()
gc()
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
source("~/Master/thesis/src/preprocessing.R")
gc()
source("~/Master/thesis/src/preprocessing.R")
unique(data_crop$OBJECTID)
duplicate(data_crop$OBJECTID)
duplicated(data_crop$OBJECTID)
which(duplicated(data_crop$OBJECTID))
len(which(duplicated(data_crop$OBJECTID)))
length(which(duplicated(data_crop$OBJECTID)))
table(duplicated(data_crop$OBJECTID))
table(duplicated(data_ref$OBJECTID))
source("~/Master/thesis/src/preprocessing.R")
table(duplicated(data_crop$OBJECTID))
29510461-
29501565
8896 / 16
# load packages -------------------------------------------------------------------------------
library(data.table)
library(dtplyr)
library(tidyverse)
# read ref data -------------------------------------------------------------------------------
data_ref <- fread("./data/ref.csv", sep = ",", header = TRUE) %>%
mutate_at(3:4, round) %>%
#filter(OBJECTID > 0) %>%
#distinct(OBJECTID, .keep_all = TRUE) %>%
arrange(OBJECTID) %>%
as.data.table()
# Diana ---------------------------------------------------------------------------------------
dataTemp <- fread("./data/temp", sep=",", header = T)
# Diana ---------------------------------------------------------------------------------------
dataTemp <- fread("./data/temp.csv", sep=",", header = T)
dataTemp1 <- data.frame("cell_id"=dataTemp$cell_id)
#Reshape
gc()
i <- 5
j <- 4
for (i in 5:20){
dataTemp1[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(dataTemp[,j:(j+5)]/10)) #March to August
dataTemp1[paste(i,"tAM",sep="")] <- data.frame(rowMeans(dataTemp[,(j+1):(j+2)]/10)) #April to May
dataTemp1[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(dataTemp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
dataTemp <- dataTemp1
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("cell_id")), list(dataTemp1, dataRef))
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("cell_id")), list(dataTemp1, data_ref))
idx <- which(crspd$OBJECTID > 0)
sampleDE_temp <- crspd[idx,1:50]
sampleDE_temp <- order(sampleDE_temp$OBJECTID)
sampleDE_temp <- crspd[idx,1:50]
sampleDE_temp <- sampleDE_temp[order(OBJECTID)]
sampleDE_temp <- sampleDE_temp[order("OBJECTID")]
sampleDE_temp <- sampleDE_temp[order(OBJECTID)]
sampleDE_temp <- crspd[idx,1:50]
sampleDE_temp <- sampleDE_temp[order(OBJECTID)]
sampleDE_temp <- sampleDE_temp[order(sampleDE_temp$OBJECTID)]
#Reshape
resh.temp <- melt(sampleDE_temp[,c(1,2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50)], id = c("cell_id", "OBJECTID"))
resh.temp[,5:8] <- melt(sampleDE_temp[,c(1,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,50)], id = c("cell_id", "OBJECTID"))
resh.temp[,9:12] <- melt(sampleDE_temp[,c(1,4,7,10,13,16,19,22,25,28,31,34,37,40,43,46,49,50)], id = c("cell_id", "OBJECTID"))
resh.temp <- resh.temp[,-c(5:7,9:11)]
names(resh.temp) <- c("cell_id", "OBJECTID", "Year", "TempAVG", "TempAM", "TempJJ")
resh.temp$Year <- recode(resh.temp$Year,
"5tAVG" = "2005",
"6tAVG" = "2006",
"7tAVG" = "2007",
"8tAVG" = "2008",
"9tAVG" = "2009",
"10tAVG" = "2010",
"11tAVG" = "2011",
"12tAVG" = "2012",
"13tAVG" = "2013",
"14tAVG" = "2014",
"15tAVG" = "2015",
"16tAVG" = "2016",
"17tAVG" = "2017",
"18tAVG" = "2018",
"19tAVG" = "2019",
"20tAVG" = "2020")
gc()
library(data.table)
library(tidyverse)
library(reshape)
library(reshape2)
start_time <- Sys.time()
print("starting process ...")
### Paths and file names ###
mainPath <- "/home/pietn/Master/thesis"
crop <- "crop.csv"
temp <- "temp.csv"
prec <- "prec.csv"
rad <- "rad.csv"
ref <- "ref.csv"
soil <- "soil.csv"
# Amount of samples and seed
n=1000
sd=1
### Extract data, check for NAs the class of each variable, and pre-process each variable ###
## Reference File #######################################
setwd(paste(mainPath,"/data", sep = ""))
dataRef <- fread(ref, sep = ",", header = T)
dataRef$x_coord <- round(dataRef$x_coord)
dataRef$y_coord <- round(dataRef$y_coord)
#Select n amount of samples from crop and find their corresponding OBJECTID and cell_id from ref
set.seed(seed = sd)
## Crop Data ############################################
print("starting crop data ...")
#Read
setwd(paste(mainPath,"/data", sep = ""))
dataCrop <- fread(crop, sep=",", header = T) %>% rename_with(~ gsub("crop_", "", .x, fixed = TRUE))
dataCrop$x_coord <- round(dataCrop$x_coord)
dataCrop$y_coord <- round(dataCrop$y_coord)
#which(is.na(dataCrop))
#sapply(dataCrop,class)
#Find the corresponding OBJECTID and cell_id from ref
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("x_coord", "y_coord")), list(dataRef, dataCrop))
crspd <- crspd[,-c(4)]
idx1 <- which(crspd$OBJECTID > 0)
#idx2 <- na.omit(unique(crspd$OBJECTID)) # Check for duplicates and erase them
idx2 <- which(duplicated(crspd$OBJECTID[idx1])) # Check for duplicates and erase them
if (length(idx2) == 0) {
sampleDE_crop <- crspd[idx1]
} else {
sampleDE_crop <- crspd[idx1]
sampleDE_crop <- sampleDE_crop[-c(idx2[c(2:5)]),]
}
sampleDE_crop <- sampleDE_crop[order(sampleDE_crop$OBJECTID,)]
dataRef <- dataRef[order(dataRef$OBJECTID,)]
#Reshape and replace crop codes according to price ! To be updated @prices !
resh.crop <- melt(sampleDE_crop, id = c("FID", "State", "OBJECTID", "cell_id", "x_coord", "y_coord"))
names(resh.crop) <- c("FID", "State", "OBJECTID", "cell_id", "x_coord", "y_coord", "Year", "crtype")
resh.crop$crtype <- replace(resh.crop$crtype, resh.crop$crtype == 8, 4)
resh.crop$crtype <- replace(resh.crop$crtype, resh.crop$crtype == 2, 1)
resh.crop$crtype <- replace(resh.crop$crtype, resh.crop$crtype == 14, 13)
crop_data_time <- Sys.time()
print("-----------------------------")
print("finished Crop Data processing")
print(crop_data_time-start_time)
#write.csv(resh.crop, "./reshaped_crop.csv", row.names = FALSE)
rm(crspd,dataCrop,resh.crop,sampleDE_crop)
gc()
## Climate Data #########################################
print("starting climate data ...")
#Temperature --------------------------------------------
print("starting temperature data ...")
setwd(paste(mainPath,"/data", sep = ""))
dataTemp <- fread(temp, sep=",", header = T)
dataTemp1 <- data.frame("cell_id"=dataTemp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
dataTemp1[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(dataTemp[,j:(j+5)]/10)) #March to August
dataTemp1[paste(i,"tAM",sep="")] <- data.frame(rowMeans(dataTemp[,(j+1):(j+2)]/10)) #April to May
dataTemp1[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(dataTemp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
dataTemp <- dataTemp1
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("cell_id")), list(dataTemp1, dataRef))
idx <- which(crspd$OBJECTID > 0)
sampleDE_temp <- crspd[idx,1:50]
#sampleDE_temp <- sort(sampleDE_temp, by="cell_id")
#Reshape
rm(crspd, dataTemp, dataTemp1)
gc()
resh.temp <- melt(sampleDE_temp[,c(1,2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50)], id = c("cell_id", "OBJECTID"))
resh.temp[,5:8] <- melt(sampleDE_temp[,c(1,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,50)], id = c("cell_id", "OBJECTID"))
resh.temp[,9:12] <- melt(sampleDE_temp[,c(1,4,7,10,13,16,19,22,25,28,31,34,37,40,43,46,49,50)], id = c("cell_id", "OBJECTID"))
resh.temp <- resh.temp[,-c(5:7,9:11)]
names(resh.temp) <- c("cell_id", "OBJECTID", "Year", "TempAVG", "TempAM", "TempJJ")
resh.temp$Year <- recode(resh.temp$Year,
"5tAVG" = "2005",
"6tAVG" = "2006",
"7tAVG" = "2007",
"8tAVG" = "2008",
"9tAVG" = "2009",
"10tAVG" = "2010",
"11tAVG" = "2011",
"12tAVG" = "2012",
"13tAVG" = "2013",
"14tAVG" = "2014",
"15tAVG" = "2015",
"16tAVG" = "2016",
"17tAVG" = "2017",
"18tAVG" = "2018",
"19tAVG" = "2019",
"20tAVG" = "2020")
library(data.table)
library(tidyverse)
library(reshape)
library(reshape2)
start_time <- Sys.time()
print("starting process ...")
### Paths and file names ###
mainPath <- "/home/pietn/Master/thesis"
crop <- "crop.csv"
temp <- "temp.csv"
prec <- "prec.csv"
rad <- "rad.csv"
ref <- "ref.csv"
soil <- "soil.csv"
# Amount of samples and seed
n=1000
sd=1
### Extract data, check for NAs the class of each variable, and pre-process each variable ###
## Reference File #######################################
setwd(paste(mainPath,"/data", sep = ""))
dataRef <- fread(ref, sep = ",", header = T)
dataRef$x_coord <- round(dataRef$x_coord)
dataRef$y_coord <- round(dataRef$y_coord)
gc()
library(data.table)
library(tidyverse)
library(reshape)
library(reshape2)
start_time <- Sys.time()
print("starting process ...")
### Paths and file names ###
mainPath <- "/home/pietn/Master/thesis"
crop <- "crop.csv"
temp <- "temp.csv"
prec <- "prec.csv"
rad <- "rad.csv"
ref <- "ref.csv"
soil <- "soil.csv"
# Amount of samples and seed
n=1000
sd=1
### Extract data, check for NAs the class of each variable, and pre-process each variable ###
## Reference File #######################################
setwd(paste(mainPath,"/data", sep = ""))
dataRef <- fread(ref, sep = ",", header = T)
dataRef$x_coord <- round(dataRef$x_coord)
dataRef$y_coord <- round(dataRef$y_coord)
#Select n amount of samples from crop and find their corresponding OBJECTID and cell_id from ref
set.seed(seed = sd)
## Crop Data ############################################
print("starting crop data ...")
#Read
setwd(paste(mainPath,"/data", sep = ""))
dataCrop <- fread(crop, sep=",", header = T) %>% rename_with(~ gsub("crop_", "", .x, fixed = TRUE))
dataCrop$x_coord <- round(dataCrop$x_coord)
dataCrop$y_coord <- round(dataCrop$y_coord)
dataCrop <- fread(crop, sep=",", header = T) %>% rename_with(~ gsub("crop_", "", .x, fixed = TRUE)) %>% as.data.table()
dataCrop <- fread(crop, sep=",", header = T) %>%
rename_with(~ gsub("crop_", "", .x,fixed = TRUE)) %>%
as.data.table()
dataCrop <- fread(crop, sep=",", header = T)
names(dataCrop) <- gsub(x = names(dataCrop), pattern = "crop_", replacement = "")
dataCrop$x_coord <- round(dataCrop$x_coord)
dataCrop$y_coord <- round(dataCrop$y_coord)
#Find the corresponding OBJECTID and cell_id from ref
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("x_coord", "y_coord")), list(dataRef, dataCrop))
crspd <- crspd[,-c(4)]
idx1 <- which(crspd$OBJECTID > 0)
#idx2 <- na.omit(unique(crspd$OBJECTID)) # Check for duplicates and erase them
idx2 <- which(duplicated(crspd$OBJECTID[idx1])) # Check for duplicates and erase them
if (length(idx2) == 0) {
sampleDE_crop <- crspd[idx1]
} else {
sampleDE_crop <- crspd[idx1]
sampleDE_crop <- sampleDE_crop[-c(idx2[c(2:5)]),]
}
sampleDE_crop <- sampleDE_crop[order(sampleDE_crop$OBJECTID,)]
dataRef <- dataRef[order(dataRef$OBJECTID,)]
resh.crop <- melt(sampleDE_crop, id = c("FID", "State", "OBJECTID", "cell_id", "x_coord", "y_coord"))
names(resh.crop) <- c("FID", "State", "OBJECTID", "cell_id", "x_coord", "y_coord", "Year", "crtype")
resh.crop$crtype <- replace(resh.crop$crtype, resh.crop$crtype == 8, 4)
resh.crop$crtype <- replace(resh.crop$crtype, resh.crop$crtype == 2, 1)
resh.crop$crtype <- replace(resh.crop$crtype, resh.crop$crtype == 14, 13)
crop_data_time <- Sys.time()
print("-----------------------------")
print("finished Crop Data processing")
print(crop_data_time-start_time)
#write.csv(resh.crop, "./reshaped_crop.csv", row.names = FALSE)
rm(crspd,dataCrop,resh.crop,sampleDE_crop)
gc()
## Climate Data #########################################
print("starting climate data ...")
#Temperature --------------------------------------------
print("starting temperature data ...")
setwd(paste(mainPath,"/data", sep = ""))
dataTemp <- fread(temp, sep=",", header = T)
dataTemp1 <- data.frame("cell_id"=dataTemp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
dataTemp1[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(dataTemp[,j:(j+5)]/10)) #March to August
dataTemp1[paste(i,"tAM",sep="")] <- data.frame(rowMeans(dataTemp[,(j+1):(j+2)]/10)) #April to May
dataTemp1[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(dataTemp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
dataTemp <- dataTemp1
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("cell_id")), list(dataTemp1, dataRef))
idx <- which(crspd$OBJECTID > 0)
sampleDE_temp <- crspd[idx,1:50]
#Reshape
rm(crspd, dataTemp, dataTemp1)
gc()
resh.temp <- melt(sampleDE_temp[,c(1,2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50)], id = c("cell_id", "OBJECTID"))
resh.temp[,5:8] <- melt(sampleDE_temp[,c(1,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,50)], id = c("cell_id", "OBJECTID"))
resh.temp[,9:12] <- melt(sampleDE_temp[,c(1,4,7,10,13,16,19,22,25,28,31,34,37,40,43,46,49,50)], id = c("cell_id", "OBJECTID"))
resh.temp <- resh.temp[,-c(5:7,9:11)]
names(resh.temp) <- c("cell_id", "OBJECTID", "Year", "TempAVG", "TempAM", "TempJJ")
resh.temp$Year <- recode(resh.temp$Year,
"5tAVG" = "2005",
"6tAVG" = "2006",
"7tAVG" = "2007",
"8tAVG" = "2008",
"9tAVG" = "2009",
"10tAVG" = "2010",
"11tAVG" = "2011",
"12tAVG" = "2012",
"13tAVG" = "2013",
"14tAVG" = "2014",
"15tAVG" = "2015",
"16tAVG" = "2016",
"17tAVG" = "2017",
"18tAVG" = "2018",
"19tAVG" = "2019",
"20tAVG" = "2020")
dataTemp <- fread("./data/temp.csv", sep=",", header = T)
dataTemp1 <- data.frame("cell_id"=dataTemp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
dataTemp1[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(dataTemp[,j:(j+5)]/10)) #March to August
dataTemp1[paste(i,"tAM",sep="")] <- data.frame(rowMeans(dataTemp[,(j+1):(j+2)]/10)) #April to May
dataTemp1[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(dataTemp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
dataTemp <- fread(temp, sep=",", header = T)
dataTemp1 <- data.frame("cell_id"=dataTemp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
dataTemp1[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(dataTemp[,j:(j+5)]/10)) #March to August
dataTemp1[paste(i,"tAM",sep="")] <- data.frame(rowMeans(dataTemp[,(j+1):(j+2)]/10)) #April to May
dataTemp1[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(dataTemp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
16*3
crspd <- Reduce(function(...) merge(..., all = TRUE, by = c("cell_id")), list(dataTemp1, dataRef))
gc()
# load packages -------------------------------------------------------------------------------
library(data.table)
library(dtplyr)
library(tidyverse)
# read ref data -------------------------------------------------------------------------------
data_ref <- fread("./data/ref.csv", sep = ",", header = TRUE) %>%
mutate_at(3:4, round) %>%
#filter(OBJECTID > 0) %>%
#distinct(OBJECTID, .keep_all = TRUE) %>%
arrange(OBJECTID) %>%
as.data.table()
# load packages -------------------------------------------------------------------------------
library(data.table)
library(dtplyr)
library(tidyverse)
# read ref data -------------------------------------------------------------------------------
data_ref <- fread("./data/ref.csv", sep = ",", header = TRUE) %>%
mutate_at(3:4, round) %>%
#filter(OBJECTID > 0) %>%
#distinct(OBJECTID, .keep_all = TRUE) %>%
arrange(OBJECTID) %>%
as.data.table()
data_temp <- fread("./data/temp.csv", sep=",", header = T)
temp <- data.frame("cell_id"=data_temp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
temp[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(data_temp[,j:(j+5)]/10)) #March to August
temp[paste(i,"tAM",sep="")] <- data.frame(rowMeans(data_temp[,(j+1):(j+2)]/10)) #April to May
temp[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(data_temp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
data_temp <- inner_join(temp, data_crop, by = c("cell_id")) %>%
filter(OBJECTID > 0) %>%
select(1:50) %>%
as.data.table()
data_temp <- inner_join(temp, data_ref, by = c("cell_id")) %>%
filter(OBJECTID > 0) %>%
select(1:50) %>%
as.data.table()
rm(temp,i,j)
gc()
resh_temp <- melt(data_temp[,c(1,2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50)], id = c("cell_id", "OBJECTID"))
data_temp <- inner_join(temp, data_ref, by = c("cell_id")) %>%
filter(OBJECTID > 0) %>%
distinct(OBJECTID, .keep_all = TRUE) %>%
arrange(OBJECTID) %>%
select(1:50) %>%
as.data.table()
temp <- data.frame("cell_id"=data_temp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
temp[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(data_temp[,j:(j+5)]/10)) #March to August
temp[paste(i,"tAM",sep="")] <- data.frame(rowMeans(data_temp[,(j+1):(j+2)]/10)) #April to May
temp[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(data_temp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
data_temp <- fread("./data/temp.csv", sep=",", header = T)
temp <- data.frame("cell_id"=data_temp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
temp[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(data_temp[,j:(j+5)]/10)) #March to August
temp[paste(i,"tAM",sep="")] <- data.frame(rowMeans(data_temp[,(j+1):(j+2)]/10)) #April to May
temp[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(data_temp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
data_temp <- inner_join(temp, data_ref, by = c("cell_id")) %>%
filter(OBJECTID > 0) %>%
distinct(OBJECTID, .keep_all = TRUE) %>%
arrange(OBJECTID) %>%
select(1:50) %>%
as.data.table()
rm(temp,i,j)
gc()
resh_temp <- melt(data_temp[,c(1,2,5,8,11,14,17,20,23,26,29,32,35,38,41,44,47,50)], id = c("cell_id", "OBJECTID"))
data_temp <- fread("./data/temp.csv", sep=",", header = T)
temp <- data.frame("cell_id"=data_temp$cell_id)
i <- 5
j <- 4
for (i in 5:20){
temp[paste(i,"tAVG",sep="")] <- data.frame(rowMeans(data_temp[,j:(j+5)]/10)) #March to August
temp[paste(i,"tAM",sep="")] <- data.frame(rowMeans(data_temp[,(j+1):(j+2)]/10)) #April to May
temp[paste(i,"tJJ",sep="")] <- data.frame(rowMeans(data_temp[,(j+3):(j+4)]/10)) #June to July
j <- j+12
}
test <- data_temp %>%
rowwise() %>%
mutate(m = mean(c(temp_200501,temp_200502)))
test <- data_temp %>%
rowwise() %>%
select(temp200501, temp_200502) %>%
mutate(m = mean())
test <- data_temp %>%
rowwise() %>%
select(temp200501, temp_200502) %>%
mutate(m = mean)
test <- data_temp %>%
rowwise() %>%
select(temp200501, temp_200502) %>%
mutate(m = mean)
test <- data_temp %>%
rowwise() %>%
select(temp200501, temp_200502) %>%
mutate(m = mean) %>%
as.data.table()
test <- data_temp %>%
rowwise() %>%
select(temp_200501, temp_200502) %>%
mutate(m = mean) %>%
as.data.table()
test <- data_temp %>%
rowwise() %>%
select(temp_200501, temp_200502) %>%
mutate(m = list(mean)) %>%
as.data.table()
test <- data_temp %>%
rowwise() %>%
select(temp_200501, temp_200502) %>%
mutate(m = rowMeans) %>%
as.data.table()
test <- data_temp %>%
rowwise() %>%
select(contains(c("1003","1004","1005","1006","1007","1008"))) %>%
mutate(m = list(mean)) %>%
as.data.table()
head(test)
